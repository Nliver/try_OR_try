var (
	score int
)

func throwApple() {
	setXYpos rand(-200, 200), -200
	show
	// 向上抛物运动
	setPhysicsMode DynamicPhysics
	setGravity 1.5
	addImpulse rand(-900, 900), rand(-3500, -6000)
}

onStart => {
	score = 0
	throwApple
}

onClick => {
	broadcast "scoreAdd"

	// 切换到切开的造型
	setCostume "apple_sliced"
	// 停止物理运动
	setPhysicsMode NoPhysics

	// 克隆一个作为右半部分
	clone

	// 当前这个作为左半部分，向左飞
	addImpulse -300, -200
	wait 0.5
	die
}

onCloned => {
	// 判断是抛出的新苹果还是切开的苹果
	if costumeName == "apple" {
		// 新抛出的苹果
		throwApple
	} else {
		// 切开的苹果右半部分，向右飞
		setPhysicsMode NoPhysics
		addImpulse 300, -200
		wait 0.5
		die
	}
}
